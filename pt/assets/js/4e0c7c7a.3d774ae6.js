"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[366],{3905:(e,o,n)=>{n.d(o,{Zo:()=>l,kt:()=>g});var t=n(7294);function r(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}function a(e,o){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?a(Object(n),!0).forEach((function(o){r(e,o,n[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))}))}return e}function s(e,o){if(null==e)return{};var n,t,r=function(e,o){if(null==e)return{};var n,t,r={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],o.indexOf(n)>=0||(r[n]=e[n]);return r}(e,o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],o.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=t.createContext({}),c=function(e){var o=t.useContext(p),n=o;return e&&(n="function"==typeof e?e(o):i(i({},o),e)),n},l=function(e){var o=c(e.components);return t.createElement(p.Provider,{value:o},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var o=e.children;return t.createElement(t.Fragment,{},o)}},m=t.forwardRef((function(e,o){var n=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,g=d["".concat(p,".").concat(m)]||d[m]||u[m]||a;return n?t.createElement(g,i(i({ref:o},l),{},{components:n})):t.createElement(g,i({ref:o},l))}));function g(e,o){var n=arguments,r=o&&o.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var s={};for(var p in o)hasOwnProperty.call(o,p)&&(s[p]=o[p]);s.originalType=e,s[d]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<a;c++)i[c]=n[c];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7718:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var t=n(7462),r=(n(7294),n(3905));const a={sidebar_position:3},i="App Container",s={unversionedId:"overview/app-container",id:"overview/app-container",title:"App Container",description:"O ExpressoTS usa InversifyJS como seu ioC (Invers\xe3o de Controle) container, pois \xe9 uma ferramenta poderosa para gerenciar inje\xe7\xe3o de depend\xeancia. O Inversify \xe9 um container com suporte a tipos que pode ser utilizado para gerenciar a inst\xe2ncia e resolu\xe7\xe3o de objetos, bem como o gerenciamento do ciclo de vida deles.",source:"@site/i18n/pt/docusaurus-plugin-content-docs/current/overview/app-container.md",sourceDirName:"overview",slug:"/overview/app-container",permalink:"/pt/docs/overview/app-container",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Aplica\xe7\xe3o",permalink:"/pt/docs/overview/application"},next:{title:"M\xf3dulos",permalink:"/pt/docs/overview/module"}},p={},c=[{value:"Creating the container",id:"creating-the-container",level:2},{value:"Defining the container scope",id:"defining-the-container-scope",level:2},{value:"Registering modules",id:"registering-modules",level:2},{value:"Apoie o projeto",id:"apoie-o-projeto",level:2}],l={toc:c},d="wrapper";function u(e){let{components:o,...n}=e;return(0,r.kt)(d,(0,t.Z)({},l,n,{components:o,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"app-container"},"App Container"),(0,r.kt)("p",null,"O ExpressoTS usa ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://inversify.io/"},"InversifyJS"))," como seu ioC (Invers\xe3o de Controle) container, pois \xe9 uma ferramenta poderosa para gerenciar inje\xe7\xe3o de depend\xeancia. O Inversify \xe9 um container com suporte a tipos que pode ser utilizado para gerenciar a inst\xe2ncia e resolu\xe7\xe3o de objetos, bem como o gerenciamento do ciclo de vida deles."),(0,r.kt)("p",null,"O cont\xeainer fornece um local central para gerenciar depend\xeancias e criar objetos que dependem de outros objetos. Quando uma classe \xe9 registrada no cont\xeainer, suas depend\xeancias s\xe3o automaticamente resolvidas e injetadas em seu construtor quando ela \xe9 instanciada. Isso permite a cria\xe7\xe3o de gr\xe1ficos de objetos complexos com um m\xednimo de c\xf3digo boilerplate."),(0,r.kt)("p",null,"Aproveitando o InversifyJS, criamos um wrapper para reduzir a complexidade sobre como os controladores, casos de uso e provedores s\xe3o injetados no cont\xeainer de aplicativos. O wrapper \xe9 chamado de ",(0,r.kt)("inlineCode",{parentName:"p"},"AppContainer")," e \xe9 respons\xe1vel por registrar todos os m\xf3dulos da aplica\xe7\xe3o no cont\xeainer."),(0,r.kt)("h2",{id:"creating-the-container"},"Creating the container"),(0,r.kt)("p",null,"Ao criar o container da aplica\xe7\xe3o \xe9 poss\xedvel definir o escopo padr\xe3o do container. O escopo padr\xe3o \xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"RequestScope"),", o que significa que todas as depend\xeancias ser\xe3o criadas uma vez por solicita\xe7\xe3o. Esse \xe9 o escopo comum para a maioria dos aplicativos da Web usados em outras estruturas, como Spring Boot ou .NET Core."),(0,r.kt)("p",null,"Aqui est\xe1 um exemplo de como criar um container:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"const appContainer = new AppContainer();\n\nconst container = appContainer.create([\n    // Registrar todos os m\xf3dulos\n]);\n")),(0,r.kt)("h2",{id:"defining-the-container-scope"},"Defining the container scope"),(0,r.kt)("p",null,"Conforme mencionado acima, se o ",(0,r.kt)("inlineCode",{parentName:"p"},"defaultScope")," n\xe3o for fornecido, o padr\xe3o ser\xe1 definido como RequestScope. No entanto, \xe9 poss\xedvel alterar o escopo padr\xe3o passando o ",(0,r.kt)("inlineCode",{parentName:"p"},"defaultScope")," como um segundo argumento para a inje\xe7\xe3o do m\xf3dulo. O BindingScopeEnum \xe9 uma enumera\xe7\xe3o que cont\xe9m os seguintes valores:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"BindingScopeEnum.Singleton")," - A depend\xeancia ser\xe1 criada uma vez e ser\xe1 compartilhada entre todas as solicita\xe7\xf5es."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"BindingScopeEnum.Request")," - A depend\xeancia ser\xe1 criada uma vez por solicita\xe7\xe3o."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"BindingScopeEnum.Transient")," - A depend\xeancia ser\xe1 criada toda vez que for solicitada.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"const appContainer = new AppContainer();\n\nconst container = appContainer.create(\n    [\n        // Registrar todos os m\xf3dulos\n    ],\n    BindingScopeEnum.Singleton,\n);\n")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Se voc\xea n\xe3o passar o ",(0,r.kt)("inlineCode",{parentName:"p"},"defaultScope")," como um segundo argumento, o escopo padr\xe3o ser\xe1 definido como ",(0,r.kt)("inlineCode",{parentName:"p"},"RequestScope"),".")),(0,r.kt)("h2",{id:"registering-modules"},"Registering modules"),(0,r.kt)("p",null,"A classe ",(0,r.kt)("inlineCode",{parentName:"p"},"AppContainer")," tem um m\xe9todo ",(0,r.kt)("inlineCode",{parentName:"p"},"create")," que recebe um array de m\xf3dulos e retorna o cont\xeainer com todos os m\xf3dulos registrados. O cont\xeainer aqui criado \xe9 o mesmo cont\xeainer usado pela classe ",(0,r.kt)("inlineCode",{parentName:"p"},"Application")," para inicializar o servidor."),(0,r.kt)("p",null,"Depois que o cont\xeainer \xe9 criado, os desenvolvedores podem registrar ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/pt/docs/overview/module"},"modules"))," no cont\xeainer:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// Cria novo container\nconst appContainer = new AppContainer();\n\nconst container = appContainer.create([\n    // Registrar todos os m\xf3dulos\n    UserModule,\n    PaymentModule,\n    ProductModule\n]);\n\nexport default container;\n")),(0,r.kt)("p",null,"A raz\xe3o pela qual criamos a classe ",(0,r.kt)("inlineCode",{parentName:"p"},"AppContainer")," \xe9 reduzir a complexidade de como o container \xe9 criado e fornecer uma maneira de registrar m\xf3dulos sem muita configura\xe7\xe3o extra."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"apoie-o-projeto"},"Apoie o projeto"),(0,r.kt)("p",null,"ExpressoTS \xe9 um projeto de c\xf3digo aberto licenciado sob o MIT. \xc9 um projeto independente com desenvolvimento cont\xednuo possibilitado gra\xe7as ao seu suporte. Se voc\xea deseja ajudar, por favor considere:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Se tornar um ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/sponsors/expressots"},"Sponsor no GitHub"))),(0,r.kt)("li",{parentName:"ul"},"Siga a ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/expressots"},"organiza\xe7\xe3o"))," no GitHub e de um Star \u2b50 no projeto"),(0,r.kt)("li",{parentName:"ul"},"Subscreva no nosso canal na Twitch: ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://www.twitch.tv/richardzampieri"},"Richard Zampieri"))),(0,r.kt)("li",{parentName:"ul"},"Entre no nosso ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://discord.com/invite/PyPJfGK"},"Discord"))),(0,r.kt)("li",{parentName:"ul"},"Contribua submetendo ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/expressots/expressots/issues/new/choose"},"issues e pull requests"))),(0,r.kt)("li",{parentName:"ul"},"Compartilhe o projeto com seus amigos e colegas")))}u.isMDXComponent=!0}}]);