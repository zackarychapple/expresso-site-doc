"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[841],{3905:(e,o,a)=>{a.d(o,{Zo:()=>c,kt:()=>k});var r=a(7294);function t(e,o,a){return o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}function s(e,o){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?s(Object(a),!0).forEach((function(o){t(e,o,a[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))}))}return e}function n(e,o){if(null==e)return{};var a,r,t=function(e,o){if(null==e)return{};var a,r,t={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],o.indexOf(a)>=0||(t[a]=e[a]);return t}(e,o);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],o.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var p=r.createContext({}),u=function(e){var o=r.useContext(p),a=o;return e&&(a="function"==typeof e?e(o):i(i({},o),e)),a},c=function(e){var o=u(e.components);return r.createElement(p.Provider,{value:o},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var o=e.children;return r.createElement(r.Fragment,{},o)}},l=r.forwardRef((function(e,o){var a=e.components,t=e.mdxType,s=e.originalType,p=e.parentName,c=n(e,["components","mdxType","originalType","parentName"]),d=u(a),l=t,k=d["".concat(p,".").concat(l)]||d[l]||m[l]||s;return a?r.createElement(k,i(i({ref:o},c),{},{components:a})):r.createElement(k,i({ref:o},c))}));function k(e,o){var a=arguments,t=o&&o.mdxType;if("string"==typeof e||t){var s=a.length,i=new Array(s);i[0]=l;var n={};for(var p in o)hasOwnProperty.call(o,p)&&(n[p]=o[p]);n.originalType=e,n[d]="string"==typeof e?e:t,i[1]=n;for(var u=2;u<s;u++)i[u]=a[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}l.displayName="MDXCreateElement"},1959:(e,o,a)=>{a.r(o),a.d(o,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>s,metadata:()=>n,toc:()=>u});var r=a(7462),t=(a(7294),a(3905));const s={sidebar_position:2},i="Cookies",n={unversionedId:"tutorials/cookies",id:"tutorials/cookies",title:"Cookies",description:"Cookies s\xe3o pequenos peda\xe7os de dados que um site envia para o navegador da web de um usu\xe1rio enquanto o usu\xe1rio est\xe1 navegando nesse site. Sempre que o usu\xe1rio carrega o site, o navegador envia o cookie de volta ao servidor para notificar o site da atividade anterior do usu\xe1rio.",source:"@site/i18n/pt/docusaurus-plugin-content-docs/current/tutorials/cookies.md",sourceDirName:"tutorials",slug:"/tutorials/cookies",permalink:"/pt/docs/tutorials/cookies",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Compress\xe3o",permalink:"/pt/docs/tutorials/compression"},next:{title:"Roadmap",permalink:"/pt/docs/roadmap"}},p={},u=[{value:"Pacote cookie-parser",id:"pacote-cookie-parser",level:2},{value:"O que considerar ao usar o cookie-parser",id:"o-que-considerar-ao-usar-o-cookie-parser",level:2},{value:"Uso com ExpressoTS",id:"uso-com-expressots",level:2},{value:"Apoie o projeto",id:"apoie-o-projeto",level:2}],c={toc:u},d="wrapper";function m(e){let{components:o,...a}=e;return(0,t.kt)(d,(0,r.Z)({},c,a,{components:o,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"cookies"},"Cookies"),(0,t.kt)("p",null,"Cookies s\xe3o pequenos peda\xe7os de dados que um site envia para o navegador da web de um usu\xe1rio enquanto o usu\xe1rio est\xe1 navegando nesse site. Sempre que o usu\xe1rio carrega o site, o navegador envia o cookie de volta ao servidor para notificar o site da atividade anterior do usu\xe1rio."),(0,t.kt)("p",null,"Os cookies servem a v\xe1rios prop\xf3sitos prim\xe1rios:"),(0,t.kt)("ol",null,(0,t.kt)("li",{parentName:"ol"},(0,t.kt)("p",{parentName:"li"},"Gerenciamento de sess\xe3o: Os cookies s\xe3o frequentemente usados para lidar com sess\xf5es de usu\xe1rio. Por exemplo, quando voc\xea faz login em um site, um cookie \xe9 definido para lembrar seu estado de login. Assim, enquanto voc\xea navega pelo site, voc\xea permanece logado.")),(0,t.kt)("li",{parentName:"ol"},(0,t.kt)("p",{parentName:"li"},"Personaliza\xe7\xe3o: Os cookies podem armazenar prefer\xeancias do usu\xe1rio para personalizar a experi\xeancia do usu\xe1rio no site. Por exemplo, cookies podem armazenar informa\xe7\xf5es sobre o idioma preferido do usu\xe1rio, tema ou outras configura\xe7\xf5es.")),(0,t.kt)("li",{parentName:"ol"},(0,t.kt)("p",{parentName:"li"},"Rastreamento: Alguns cookies rastreiam o comportamento do usu\xe1rio no site ao longo do tempo. Esses s\xe3o frequentemente usados por ferramentas de an\xe1lise de terceiros para entender o comportamento do usu\xe1rio e otimizar o site de acordo. Anunciantes tamb\xe9m usam cookies de rastreamento para exibir an\xfancios direcionados com base na atividade do usu\xe1rio.")),(0,t.kt)("li",{parentName:"ol"},(0,t.kt)("p",{parentName:"li"},"Seguran\xe7a: Os cookies podem ser usados para suportar fun\xe7\xf5es seguras do site. Por exemplo, um cookie pode ser usado para lembrar que um usu\xe1rio se autenticou em um site para que o servidor saiba que o usu\xe1rio j\xe1 forneceu credenciais de login v\xe1lidas."))),(0,t.kt)("p",null,"Tamb\xe9m \xe9 importante notar que existem diferentes tipos de cookies - cookies de sess\xe3o, que expiram quando a sess\xe3o do navegador termina, e cookies persistentes, que permanecem no dispositivo do usu\xe1rio por um per\xedodo de tempo definido ou at\xe9 que sejam explicitamente exclu\xeddos."),(0,t.kt)("admonition",{title:"USANDO COOKIE PARA RASTREAMENTO",type:"caution"},(0,t.kt)("p",{parentName:"admonition"},"Tenha em mente que o uso de cookies, especialmente para rastreamento e personaliza\xe7\xe3o, levantou preocupa\xe7\xf5es com a privacidade, levando a regulamenta\xe7\xf5es como o GDPR na Europa e o CCPA na Calif\xf3rnia que exigem que os sites divulguem seu uso de cookies e obtenham o consentimento do usu\xe1rio.")),(0,t.kt)("h2",{id:"pacote-cookie-parser"},"Pacote cookie-parser"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Facilidade de Uso: o cookie-parser torna muito f\xe1cil ler valores de cookies, que s\xe3o frequentemente usados para rastrear sess\xf5es de usu\xe1rios, personaliza\xe7\xe3o e gerenciamento de aplica\xe7\xf5es com estado. Sem esta biblioteca, voc\xea teria que analisar manualmente o cabe\xe7alho do Cookie e lidar com as nuances da formata\xe7\xe3o de cookies.")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Cookies Assinados: O pacote tamb\xe9m suporta cookies assinados, que s\xe3o uma maneira de verificar a integridade dos cookies (ou seja, se eles foram adulterados). Esta \xe9 uma funcionalidade importante para garantir a seguran\xe7a das informa\xe7\xf5es sens\xedveis armazenadas nos cookies."))),(0,t.kt)("h2",{id:"o-que-considerar-ao-usar-o-cookie-parser"},"O que considerar ao usar o cookie-parser"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Sobrecarga: Embora n\xe3o seja uma biblioteca pesada, usar o cookie-parser adiciona um pouco de sobrecarga a cada requisi\xe7\xe3o, pois ele analisa todos os cookies, independentemente de serem usados no manipulador de rota.")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Estado: Os cookies, por natureza, tornam uma aplica\xe7\xe3o com estado. Ao escalar uma aplica\xe7\xe3o, o estado pode ser problem\xe1tico. Portanto, m\xe9todos de autentica\xe7\xe3o alternativos sem estado, como tokens, podem ser prefer\xedveis em uma arquitetura de microservi\xe7os."))),(0,t.kt)("h1",{id:"quando-usar"},"Quando usar"),(0,t.kt)("p",null,"Decidir quando usar o cookie-parser depende em grande parte das necessidades de sua aplica\xe7\xe3o. Se sua aplica\xe7\xe3o web requer gerenciamento de estado e voc\xea escolheu fazer isso por meio de cookies, o cookie-parser pode facilitar sua vida e tornar sua aplica\xe7\xe3o mais segura com cookies assinados."),(0,t.kt)("p",null,"No entanto, se seu site tem um tr\xe1fego pesado, a sobrecarga pode se tornar uma preocupa\xe7\xe3o. Se sua arquitetura \xe9 baseada em servi\xe7os sem estado (comum em arquiteturas de microservi\xe7os), voc\xea pode querer evitar cookies e optar por outros m\xe9todos de manter o estado, como JWTs (JSON Web Tokens)."),(0,t.kt)("admonition",{type:"info"},(0,t.kt)("p",{parentName:"admonition"},"Caso voc\xea esteja lidando com um site de alto tr\xe1fego, considere alternativas como sess\xf5es armazenadas em um banco de dados, JWTs, ou tokens armazenados em cabe\xe7alhos HTTP. Al\xe9m disso, usar um balanceador de carga para distribuir o tr\xe1fego e m\xf3dulos de armazenamento de sess\xe3o para manter dados de sess\xe3o em v\xe1rios servidores pode ajudar a gerenciar alto tr\xe1fego e dados com estado.")),(0,t.kt)("p",null,"Assim como antes, a melhor abordagem geralmente envolve combinar v\xe1rias t\xe9cnicas, adaptadas \xe0s necessidades espec\xedficas de sua aplica\xe7\xe3o. Testar e monitorar sua aplica\xe7\xe3o sob condi\xe7\xf5es realistas pode ajudar a orientar seu processo de tomada de decis\xe3o."),(0,t.kt)("h2",{id:"uso-com-expressots"},"Uso com ExpressoTS"),(0,t.kt)("p",null,"Instale o middleware cookie-parser npm e a defini\xe7\xe3o de tipo."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"npm i cookie-parser\nnpm i -D @types/cookie-parser\n")),(0,t.kt)("p",null,"Ap\xf3s a instala\xe7\xe3o, voc\xea pode adicionar o middleware ao seu aplicativo ExpressoTS."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-typescript"},'import cookieParser from "cookie-parser";\n\n// Adicione no m\xe9todo de cria\xe7\xe3o da aplica\xe7\xe3o no array de middleware\nAppInstance.create(container, [cookieParser()]);\n')),(0,t.kt)("p",null,"Aqui est\xe1 um exemplo de como usar o cookie-parser:"),(0,t.kt)("p",null,"Defina um cookie com um UUID aleat\xf3rio como valor, que expira em 1 hora e \xe9 acess\xedvel apenas via HTTP:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-typescript"},'@httpGet("set-cookie")\nsetCookie(@response() res: Response) {\n    res.cookie("authToken", randomUUID(), {\n        maxAge: 60 * 60 * 1000, // 1 hora\n        httpOnly: true,\n    });\n    return res.send("Cookie set!");\n}\n')),(0,t.kt)("p",null,"Obter um cookie:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-typescript"},'@httpGet("get-cookie")\ngetCookie(@cookies() cookieInfo: string, @response() res: Response) {\n    return res.send(`Your token: ${cookieInfo["authToken"]}`);\n}\n')),(0,t.kt)("admonition",{type:"tip"},(0,t.kt)("p",{parentName:"admonition"},"Note que estamos usando o decorator ",(0,t.kt)("inlineCode",{parentName:"p"},"@cookies()")," para obter as informa\xe7\xf5es do cookie. Este decorator \xe9 fornecido pelo inversify-express-utils.")),(0,t.kt)("hr",null),(0,t.kt)("h2",{id:"apoie-o-projeto"},"Apoie o projeto"),(0,t.kt)("p",null,"ExpressoTS \xe9 um projeto de c\xf3digo aberto licenciado sob o MIT. \xc9 um projeto independente com desenvolvimento cont\xednuo possibilitado gra\xe7as ao seu suporte. Se voc\xea deseja ajudar, por favor considere:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Se tornar um ",(0,t.kt)("strong",{parentName:"li"},(0,t.kt)("a",{parentName:"strong",href:"https://github.com/sponsors/expressots"},"Sponsor no GitHub"))),(0,t.kt)("li",{parentName:"ul"},"Siga a ",(0,t.kt)("strong",{parentName:"li"},(0,t.kt)("a",{parentName:"strong",href:"https://github.com/expressots"},"organiza\xe7\xe3o"))," no GitHub e de um Star \u2b50 no projeto"),(0,t.kt)("li",{parentName:"ul"},"Subscreva no nosso canal na Twitch: ",(0,t.kt)("strong",{parentName:"li"},(0,t.kt)("a",{parentName:"strong",href:"https://www.twitch.tv/richardzampieri"},"Richard Zampieri"))),(0,t.kt)("li",{parentName:"ul"},"Entre no nosso ",(0,t.kt)("strong",{parentName:"li"},(0,t.kt)("a",{parentName:"strong",href:"https://discord.com/invite/PyPJfGK"},"Discord"))),(0,t.kt)("li",{parentName:"ul"},"Contribua submetendo ",(0,t.kt)("strong",{parentName:"li"},(0,t.kt)("a",{parentName:"strong",href:"https://github.com/expressots/expressots/issues/new/choose"},"issues e pull requests"))),(0,t.kt)("li",{parentName:"ul"},"Compartilhe o projeto com seus amigos e colegas")))}m.isMDXComponent=!0}}]);