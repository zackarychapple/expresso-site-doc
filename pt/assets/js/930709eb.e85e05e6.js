"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[642],{3905:(e,o,a)=>{a.d(o,{Zo:()=>d,kt:()=>v});var r=a(7294);function t(e,o,a){return o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}function s(e,o){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?s(Object(a),!0).forEach((function(o){t(e,o,a[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))}))}return e}function i(e,o){if(null==e)return{};var a,r,t=function(e,o){if(null==e)return{};var a,r,t={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],o.indexOf(a)>=0||(t[a]=e[a]);return t}(e,o);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],o.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var p=r.createContext({}),c=function(e){var o=r.useContext(p),a=o;return e&&(a="function"==typeof e?e(o):n(n({},o),e)),a},d=function(e){var o=c(e.components);return r.createElement(p.Provider,{value:o},e.children)},m="mdxType",l={inlineCode:"code",wrapper:function(e){var o=e.children;return r.createElement(r.Fragment,{},o)}},u=r.forwardRef((function(e,o){var a=e.components,t=e.mdxType,s=e.originalType,p=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),m=c(a),u=t,v=m["".concat(p,".").concat(u)]||m[u]||l[u]||s;return a?r.createElement(v,n(n({ref:o},d),{},{components:a})):r.createElement(v,n({ref:o},d))}));function v(e,o){var a=arguments,t=o&&o.mdxType;if("string"==typeof e||t){var s=a.length,n=new Array(s);n[0]=u;var i={};for(var p in o)hasOwnProperty.call(o,p)&&(i[p]=o[p]);i.originalType=e,i[m]="string"==typeof e?e:t,n[1]=i;for(var c=2;c<s;c++)n[c]=a[c];return r.createElement.apply(null,n)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},6170:(e,o,a)=>{a.r(o),a.d(o,{assets:()=>p,contentTitle:()=>n,default:()=>l,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var r=a(7462),t=(a(7294),a(3905));const s={sidebar_position:1},n="Compress\xe3o",i={unversionedId:"tutorials/compression",id:"tutorials/compression",title:"Compress\xe3o",description:"O pacote npm compression \xe9 um middleware que pode comprimir corpos de resposta para solicita\xe7\xf5es que passam por ele, o que pode ajudar a reduzir o tamanho dos dados que s\xe3o enviados pela rede, levando a tempos de resposta mais r\xe1pidos e uso menor de largura de banda. Ele usa a biblioteca zlib para realizar a compress\xe3o gzip ou deflate, ambos amplamente suportados pelos navegadores da web modernos.",source:"@site/i18n/pt/docusaurus-plugin-content-docs/current/tutorials/compression.md",sourceDirName:"tutorials",slug:"/tutorials/compression",permalink:"/pt/docs/tutorials/compression",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Tutorials",permalink:"/pt/docs/category/tutorials"},next:{title:"Cookies",permalink:"/pt/docs/tutorials/cookies"}},p={},c=[{value:"Pacote de compress\xe3o",id:"pacote-de-compress\xe3o",level:2},{value:"Quando usar",id:"quando-usar",level:2},{value:"Usar com ExpressoTS",id:"usar-com-expressots",level:2},{value:"Apoie o projeto",id:"apoie-o-projeto",level:2}],d={toc:c},m="wrapper";function l(e){let{components:o,...a}=e;return(0,t.kt)(m,(0,r.Z)({},d,a,{components:o,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"compress\xe3o"},"Compress\xe3o"),(0,t.kt)("p",null,"O pacote npm compression \xe9 um middleware que pode comprimir corpos de resposta para solicita\xe7\xf5es que passam por ele, o que pode ajudar a reduzir o tamanho dos dados que s\xe3o enviados pela rede, levando a tempos de resposta mais r\xe1pidos e uso menor de largura de banda. Ele usa a biblioteca zlib para realizar a compress\xe3o gzip ou deflate, ambos amplamente suportados pelos navegadores da web modernos."),(0,t.kt)("h2",{id:"pacote-de-compress\xe3o"},"Pacote de compress\xe3o"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Desempenho: Pode reduzir significativamente o tamanho do corpo da resposta, diminuindo assim o tempo que um cliente leva para baixar a resposta e renderizar o conte\xfado.")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Efici\xeancia: Ajuda na redu\xe7\xe3o do consumo de largura de banda, o que \xe9 especialmente \xfatil se o seu servidor estiver enviando grandes quantidades de dados ou se voc\xea tiver largura de banda limitada.\nContras do pacote npm Compression:")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Sobrecarga: Embora a compress\xe3o reduza o tamanho do corpo da resposta, ela adiciona alguma sobrecarga computacional do lado do servidor, pois o servidor deve comprimir o corpo da resposta antes de envi\xe1-lo."))),(0,t.kt)("admonition",{title:"SOBRECARGA DA COMPRESS\xc3O",type:"caution"},(0,t.kt)("p",{parentName:"admonition"},"Isso pode n\xe3o ser ideal para sites de alto tr\xe1fego onde os recursos do servidor est\xe3o em alta demanda.")),(0,t.kt)("p",null,"Nem todo conte\xfado se beneficia da compress\xe3o. Arquivos bin\xe1rios como imagens e v\xeddeos j\xe1 s\xe3o comprimidos e tentar comprimi-los ainda mais \xe0s vezes pode at\xe9 aumentar o tamanho deles."),(0,t.kt)("h2",{id:"quando-usar"},"Quando usar"),(0,t.kt)("p",null,"Decidir quando usar a compress\xe3o depende do caso de uso. Se o seu site serve muitos dados textuais (HTML, CSS, JS, JSON, XML etc.), ent\xe3o usar o pacote de compress\xe3o npm pode resultar em economias significativas de largura de banda e benef\xedcios de desempenho. No entanto, se o seu site tem um tr\xe1fego extremamente alto, a sobrecarga computacional adicional da compress\xe3o pode come\xe7ar a se tornar um gargalo."),(0,t.kt)("p",null,"Em cen\xe1rios de alto tr\xe1fego, pode ser mais ben\xe9fico usar um proxy reverso ou uma CDN (Rede de Entrega de Conte\xfado) que pode servir ativos est\xe1ticos e realizar caching. Isso pode desviar parte do tr\xe1fego dos seus servidores principais e tamb\xe9m servir conte\xfado de locais geograficamente mais pr\xf3ximos dos usu\xe1rios, resultando em tempos de resposta mais r\xe1pidos. Esses servi\xe7os geralmente lidam com a compress\xe3o por conta pr\xf3pria, o que significa que voc\xea n\xe3o precisaria usar o pacote de compress\xe3o npm."),(0,t.kt)("p",null,"As abordagens modernas podem envolver uma combina\xe7\xe3o de t\xe9cnicas - servir ativos est\xe1ticos de uma CDN, armazenar em cache respostas quando apropriado, utilizar HTTP/2 para multiplexa\xe7\xe3o e dividir seu aplicativo em microservi\xe7os para distribuir a carga."),(0,t.kt)("p",null,"Lembre-se, essas abordagens n\xe3o s\xe3o mutuamente exclusivas. Muitas vezes, a melhor abordagem \xe9 usar uma combina\xe7\xe3o dessas t\xe9cnicas com base nos requisitos espec\xedficos do seu aplicativo. Testar e monitorar seu aplicativo sob cargas de trabalho realistas pode ajud\xe1-lo a tomar a melhor decis\xe3o."),(0,t.kt)("h2",{id:"usar-com-expressots"},"Usar com ExpressoTS"),(0,t.kt)("p",null,"Instale o middleware de compress\xe3o npm."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"npm i compression\n")),(0,t.kt)("p",null,"Ap\xf3s a instala\xe7\xe3o, voc\xea pode adicionar o middleware ao seu aplicativo ExpressoTS."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-typescript"},'import compression from "compression";\n\n// Adicione no m\xe9todo de cria\xe7\xe3o do aplicativo no array de middleware\nAppInstance.create(container, [compression()]);\n')),(0,t.kt)("p",null,"Aqui est\xe1 outro exemplo: usando compress\xe3o com filtros, filtrando solicita\xe7\xf5es que cont\xeam corpos de carga \xfatil maiores que 100 * 1024 bytes:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-typescript"},'AppInstance.create(container, [\n        compression({\n            level: 6,\n            threshold: 100 * 1024,\n            filter: (req, res) => {\n                if (req.headers["x-no-compression"]) {\n                    return false;\n                }\n                return compression.filter(req, res);\n            },\n        }),\n    ]);\n')),(0,t.kt)("admonition",{type:"tip"},(0,t.kt)("p",{parentName:"admonition"},"Para mais informa\xe7\xf5es sobre o pacote de compress\xe3o npm, por favor visite o ",(0,t.kt)("strong",{parentName:"p"},(0,t.kt)("a",{parentName:"strong",href:"https://www.npmjs.com/package/compression"},"pacote compression do npm")),".")),(0,t.kt)("hr",null),(0,t.kt)("h2",{id:"apoie-o-projeto"},"Apoie o projeto"),(0,t.kt)("p",null,"ExpressoTS \xe9 um projeto de c\xf3digo aberto licenciado sob o MIT. \xc9 um projeto independente com desenvolvimento cont\xednuo possibilitado gra\xe7as ao seu suporte. Se voc\xea deseja ajudar, por favor considere:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Se tornar um ",(0,t.kt)("strong",{parentName:"li"},(0,t.kt)("a",{parentName:"strong",href:"https://github.com/sponsors/expressots"},"Sponsor no GitHub"))),(0,t.kt)("li",{parentName:"ul"},"Siga a ",(0,t.kt)("strong",{parentName:"li"},(0,t.kt)("a",{parentName:"strong",href:"https://github.com/expressots"},"organiza\xe7\xe3o"))," no GitHub e de um Star \u2b50 no projeto"),(0,t.kt)("li",{parentName:"ul"},"Subscreva no nosso canal na Twitch: ",(0,t.kt)("strong",{parentName:"li"},(0,t.kt)("a",{parentName:"strong",href:"https://www.twitch.tv/richardzampieri"},"Richard Zampieri"))),(0,t.kt)("li",{parentName:"ul"},"Entre no nosso ",(0,t.kt)("strong",{parentName:"li"},(0,t.kt)("a",{parentName:"strong",href:"https://discord.com/invite/PyPJfGK"},"Discord"))),(0,t.kt)("li",{parentName:"ul"},"Contribua submetendo ",(0,t.kt)("strong",{parentName:"li"},(0,t.kt)("a",{parentName:"strong",href:"https://github.com/expressots/expressots/issues/new/choose"},"issues e pull requests"))),(0,t.kt)("li",{parentName:"ul"},"Compartilhe o projeto com seus amigos e colegas")))}l.isMDXComponent=!0}}]);