"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[693],{3905:(e,o,a)=>{a.d(o,{Zo:()=>p,kt:()=>k});var t=a(7294);function n(e,o,a){return o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}function r(e,o){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),a.push.apply(a,t)}return a}function s(e){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?r(Object(a),!0).forEach((function(o){n(e,o,a[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))}))}return e}function i(e,o){if(null==e)return{};var a,t,n=function(e,o){if(null==e)return{};var a,t,n={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],o.indexOf(a)>=0||(n[a]=e[a]);return n}(e,o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],o.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=t.createContext({}),d=function(e){var o=t.useContext(l),a=o;return e&&(a="function"==typeof e?e(o):s(s({},o),e)),a},p=function(e){var o=d(e.components);return t.createElement(l.Provider,{value:o},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var o=e.children;return t.createElement(t.Fragment,{},o)}},m=t.forwardRef((function(e,o){var a=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=d(a),m=n,k=c["".concat(l,".").concat(m)]||c[m]||u[m]||r;return a?t.createElement(k,s(s({ref:o},p),{},{components:a})):t.createElement(k,s({ref:o},p))}));function k(e,o){var a=arguments,n=o&&o.mdxType;if("string"==typeof e||n){var r=a.length,s=new Array(r);s[0]=m;var i={};for(var l in o)hasOwnProperty.call(o,l)&&(i[l]=o[l]);i.originalType=e,i[c]="string"==typeof e?e:n,s[1]=i;for(var d=2;d<r;d++)s[d]=a[d];return t.createElement.apply(null,s)}return t.createElement.apply(null,a)}m.displayName="MDXCreateElement"},8946:(e,o,a)=>{a.r(o),a.d(o,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>d});var t=a(7462),n=(a(7294),a(3905));const r={sidebar_position:11},s="Inje\xe7\xe3o de Depend\xeancias",i={unversionedId:"overview/di",id:"overview/di",title:"Inje\xe7\xe3o de Depend\xeancias",description:"Dependency Injection (DI) \xe9 um padr\xe3o de design usado no desenvolvimento de software que envolve fornecer a um objeto as inst\xe2ncias das classes necess\xe1rias para executar suas tarefas, em vez de fazer com que ele mesmo construa essas inst\xe2ncias. Este processo de fornecer inst\xe2ncias \xe9 chamado de injetar nelas, da\xed o termo Inje\xe7\xe3o de Depend\xeancia.",source:"@site/i18n/pt/docusaurus-plugin-content-docs/current/overview/di.md",sourceDirName:"overview",slug:"/overview/di",permalink:"/pt/docs/overview/di",draft:!1,tags:[],version:"current",sidebarPosition:11,frontMatter:{sidebar_position:11},sidebar:"tutorialSidebar",previous:{title:"Decoradores",permalink:"/pt/docs/overview/decorators"},next:{title:"Depend\xeancias",permalink:"/pt/docs/overview/dependencies"}},l={},d=[{value:"Benef\xedcios do DI",id:"benef\xedcios-do-di",level:2},{value:"DI no ExpressoTS",id:"di-no-expressots",level:2},{value:"Divis\xe3o dos componentes DI",id:"divis\xe3o-dos-componentes-di",level:2},{value:"Resumo",id:"resumo",level:3},{value:"Container",id:"container",level:3},{value:"M\xf3dulos",id:"m\xf3dulos",level:3},{value:"Controladores",id:"controladores",level:3},{value:"Classes",id:"classes",level:3},{value:"Request",id:"request",level:4},{value:"Singleton",id:"singleton",level:4},{value:"Transient",id:"transient",level:4},{value:"Apoie o projeto",id:"apoie-o-projeto",level:2}],p={toc:d},c="wrapper";function u(e){let{components:o,...r}=e;return(0,n.kt)(c,(0,t.Z)({},p,r,{components:o,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"inje\xe7\xe3o-de-depend\xeancias"},"Inje\xe7\xe3o de Depend\xeancias"),(0,n.kt)("p",null,"Dependency Injection (DI) \xe9 um padr\xe3o de design usado no desenvolvimento de software que envolve fornecer a um objeto as inst\xe2ncias das classes necess\xe1rias para executar suas tarefas, em vez de fazer com que ele mesmo construa essas inst\xe2ncias. Este processo de ",(0,n.kt)("inlineCode",{parentName:"p"},"fornecer")," inst\xe2ncias \xe9 chamado de ",(0,n.kt)("inlineCode",{parentName:"p"},"injetar")," nelas, da\xed o termo Inje\xe7\xe3o de Depend\xeancia."),(0,n.kt)("h2",{id:"benef\xedcios-do-di"},"Benef\xedcios do DI"),(0,n.kt)("p",null,"Aqui est\xe3o alguns dos principais benef\xedcios do uso da inje\xe7\xe3o de depend\xeancia:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Desacoplamento: DI ajuda a desacoplar os componentes do seu aplicativo. Em vez de os componentes criarem os objetos dos quais dependem, esses objetos s\xe3o passados (injetados) por uma estrutura ou cont\xeainer de DI. Isso significa que os componentes n\xe3o precisam saber sobre o funcionamento interno de suas depend\xeancias, e as depend\xeancias podem ser trocadas sem que o componente saiba ou se importe.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Testabilidade: DI facilita o teste de unidade. Como as depend\xeancias s\xe3o injetadas, voc\xea pode facilmente fornecer objetos fict\xedcios durante o teste. Isso permite que cada unidade de c\xf3digo seja testada isoladamente, com controle total sobre suas depend\xeancias.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"C\xf3digo reutiliz\xe1vel: com DI, suas classes s\xe3o normalmente projetadas para funcionar com interfaces em vez de classes concretas. Isso significa que voc\xea pode reutilizar a mesma classe em diferentes contextos, com diferentes depend\xeancias injetadas.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Manuten\xe7\xe3o mais f\xe1cil e maior efici\xeancia: centralizando a cria\xe7\xe3o de objetos e reduzindo a quantidade de instancia\xe7\xe3o de classe codificada, a manuten\xe7\xe3o se torna mais f\xe1cil. Quando uma classe muda, normalmente voc\xea s\xf3 precisa atualizar o c\xf3digo em um lugar.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Configurabilidade: Voc\xea pode configurar sua estrutura de aplica\xe7\xe3o externamente, normalmente atrav\xe9s de XML ou arquivos similares. Isso significa que voc\xea pode modificar a estrutura e as depend\xeancias de seus componentes sem precisar modificar o pr\xf3prio c\xf3digo.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Ciclos de vida e escopo: gerencie o ciclo de vida de objetos injetados e controle seu escopo (por exemplo, escopo singleton, escopo de solicita\xe7\xe3o).")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Gerenciamento de simultaneidade: os cont\xeaineres podem lidar automaticamente com tempos de vida de servi\xe7o em um ambiente simult\xe2neo, o que pode ser uma tarefa complexa para lidar corretamente sem essa ferramenta."))),(0,n.kt)("p",null,"Em conclus\xe3o, DI \xe9 uma t\xe9cnica que facilita o acoplamento fraco, maior capacidade de teste e c\xf3digo mais flex\xedvel e de f\xe1cil manuten\xe7\xe3o."),(0,n.kt)("h2",{id:"di-no-expressots"},"DI no ExpressoTS"),(0,n.kt)("p",null,"Aqui est\xe1 como o ExpressoTS implementa DI:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Application Overview",src:a(6532).Z,width:"1110",height:"592"})),(0,n.kt)("h2",{id:"divis\xe3o-dos-componentes-di"},"Divis\xe3o dos componentes DI"),(0,n.kt)("p",null,"Aqui est\xe1 uma an\xe1lise dos componentes DI usados no ExpressoTS:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Componentes"),(0,n.kt)("th",{parentName:"tr",align:null},"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Container"),(0,n.kt)("td",{parentName:"tr",align:null},"O container DI do aplicativo ExpressoTS.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Module"),(0,n.kt)("td",{parentName:"tr",align:null},"Um m\xf3dulo de cont\xeainer \xe9 normalmente usado para agrupar controladores relacionados e suas depend\xeancias.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Controller"),(0,n.kt)("td",{parentName:"tr",align:null},"Interface prim\xe1ria entre o cliente e o servidor. Respons\xe1vel por lidar com as solicita\xe7\xf5es recebidas.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Classes"),(0,n.kt)("td",{parentName:"tr",align:null},"Qualquer outra classe que fa\xe7a parte do ecossistema ExpressoTS, por exemplo, fornecedores, entidades, ajudantes, etc.")))),(0,n.kt)("h3",{id:"resumo"},"Resumo"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"O cont\xeainer tem seu escopo padr\xe3o que pode ser substitu\xeddo pelo m\xf3dulo. O escopo padr\xe3o \xe9 o escopo ",(0,n.kt)("inlineCode",{parentName:"li"},"Request"),"."),(0,n.kt)("li",{parentName:"ul"},"Definir um escopo para um m\xf3dulo for\xe7a todos os controladores desse m\xf3dulo a terem o mesmo escopo."),(0,n.kt)("li",{parentName:"ul"},"N\xe3o definir um escopo para um m\xf3dulo permite que os controladores tenham seu pr\xf3prio escopo usando o decorador ",(0,n.kt)("inlineCode",{parentName:"li"},"@scope()"),"."),(0,n.kt)("li",{parentName:"ul"},"Todas as outras classes cadastradas como provedores, entidades, helpers podem ter seu escopo espec\xedfico baseado no decorador utilizado."),(0,n.kt)("li",{parentName:"ul"},"Decoradores:")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Decoradores"),(0,n.kt)("th",{parentName:"tr",align:null},"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"@provide"),(0,n.kt)("td",{parentName:"tr",align:null},"Vincula uma classe a um cont\xeainer de inje\xe7\xe3o de depend\xeancia como RequestScope.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"@provideSingleton"),(0,n.kt)("td",{parentName:"tr",align:null},"Vincula uma classe a um cont\xeainer de inje\xe7\xe3o de depend\xeancia como Singleton.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"@provideTransient"),(0,n.kt)("td",{parentName:"tr",align:null},"Vincula uma classe a um cont\xeainer de inje\xe7\xe3o de depend\xeancia como Transient.")))),(0,n.kt)("h3",{id:"container"},"Container"),(0,n.kt)("p",null,"O cont\xeainer \xe9 o principal componente do sistema DI. Ele \xe9 respons\xe1vel por gerenciar o ciclo de vida dos objetos que cria e por injetar depend\xeancias nesses objetos."),(0,n.kt)("p",null,"O escopo padr\xe3o do cont\xeainer \xe9 o escopo ",(0,n.kt)("inlineCode",{parentName:"p"},"Request"),". Isso significa que o cont\xeainer criar\xe1 uma nova inst\xe2ncia de uma classe para cada solicita\xe7\xe3o. Para obter mais informa\xe7\xf5es sobre ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"/pt/docs/overview/app-container"},"Cont\xeaineres")),", consulte a se\xe7\xe3o de cont\xeaineres do aplicativo."),(0,n.kt)("h3",{id:"m\xf3dulos"},"M\xf3dulos"),(0,n.kt)("p",null,"Um m\xf3dulo cont\xeainer \xe9 usado para organizar controladores relacionados e suas depend\xeancias e unidades coerentes. Os m\xf3dulos tamb\xe9m podem ter sua pr\xf3pria defini\xe7\xe3o de escopo espec\xedfica. Para obter mais informa\xe7\xf5es sobre os m\xf3dulos, consulte a se\xe7\xe3o ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"/pt/docs/overview/module"},"M\xf3dulos")),"."),(0,n.kt)("h3",{id:"controladores"},"Controladores"),(0,n.kt)("p",null,"Os controladores s\xe3o agrupados em m\xf3dulos que geralmente representam um recurso do aplicativo. Os controladores est\xe3o sempre associados a m\xf3dulos. Se um m\xf3dulo tiver um escopo espec\xedfico definido, todos os controladores desse m\xf3dulo ser\xe3o criados com o escopo do m\xf3dulo. Caso o m\xf3dulo n\xe3o tenha um escopo definido, ele herda o escopo do container Application, que \xe9 o escopo ",(0,n.kt)("inlineCode",{parentName:"p"},"Request"),"."),(0,n.kt)("p",null,"Neste caso particular, controladores individuais podem ter seu pr\xf3prio escopo definido usando o decorador ",(0,n.kt)("inlineCode",{parentName:"p"},"@scope()"),". Para obter mais informa\xe7\xf5es sobre controladores, consulte a se\xe7\xe3o ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"/pt/docs/overview/controller"},"Controllers")),"."),(0,n.kt)("h3",{id:"classes"},"Classes"),(0,n.kt)("p",null,"Qualquer outra classe que faz parte do ecossistema ExpressoTS, por exemplo, provedores, entidades, classes auxiliares, etc s\xe3o injetadas automaticamente no Application Container atrav\xe9s do decorador ",(0,n.kt)("inlineCode",{parentName:"p"},"@provide()")," no qual injeta as classes como ",(0,n.kt)("inlineCode",{parentName:"p"},"Request")," por padr\xe3o."),(0,n.kt)("p",null,"Se voc\xea quiser definir um escopo diferente para sua classe, voc\xea pode usar o decorador ",(0,n.kt)("inlineCode",{parentName:"p"},"@provideSingleton()")," para injetar a classe como um singleton ou ",(0,n.kt)("inlineCode",{parentName:"p"},"@provideTransient()")," para injetar a classe como transiente."),(0,n.kt)("p",null,"Exemplo de uso:"),(0,n.kt)("h4",{id:"request"},"Request"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"@provide(MyRequest)\nclass MyRequest { }\n")),(0,n.kt)("h4",{id:"singleton"},"Singleton"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"@provideSingleton(MySingleton)\nclass MySingleton { }\n")),(0,n.kt)("h4",{id:"transient"},"Transient"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"@provideTransient(MyTransient)\nclass MyTransient { }\n")),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"Para definir as liga\xe7\xf5es de escopo, o enum BindingScopeEnum pode ser usado.")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"BindingScopeEnum.Singleton")," - A depend\xeancia ser\xe1 criada uma vez e ser\xe1 compartilhada entre todas as solicita\xe7\xf5es."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"BindingScopeEnum.Request")," - A depend\xeancia ser\xe1 criada uma vez por solicita\xe7\xe3o."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"BindingScopeEnum.Transient")," - A depend\xeancia ser\xe1 criada toda vez que for solicitada.")),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"apoie-o-projeto"},"Apoie o projeto"),(0,n.kt)("p",null,"ExpressoTS \xe9 um projeto de c\xf3digo aberto licenciado sob o MIT. \xc9 um projeto independente com desenvolvimento cont\xednuo possibilitado gra\xe7as ao seu suporte. Se voc\xea deseja ajudar, por favor considere:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Se tornar um ",(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://github.com/sponsors/expressots"},"Sponsor no GitHub"))),(0,n.kt)("li",{parentName:"ul"},"Siga a ",(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://github.com/expressots"},"organiza\xe7\xe3o"))," no GitHub e de um Star \u2b50 no projeto"),(0,n.kt)("li",{parentName:"ul"},"Subscreva no nosso canal na Twitch: ",(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://www.twitch.tv/richardzampieri"},"Richard Zampieri"))),(0,n.kt)("li",{parentName:"ul"},"Entre no nosso ",(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://discord.com/invite/PyPJfGK"},"Discord"))),(0,n.kt)("li",{parentName:"ul"},"Contribua submetendo ",(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://github.com/expressots/expressots/issues/new/choose"},"issues e pull requests"))),(0,n.kt)("li",{parentName:"ul"},"Compartilhe o projeto com seus amigos e colegas")))}u.isMDXComponent=!0},6532:(e,o,a)=>{a.d(o,{Z:()=>t});const t=a.p+"assets/images/di-02404c06b2ee42bfc07c1fb33783c88a.png"}}]);