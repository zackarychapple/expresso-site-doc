"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[213],{3905:(e,t,o)=>{o.d(t,{Zo:()=>c,kt:()=>k});var r=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function n(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,r,a=function(e,t){if(null==e)return{};var o,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var l=r.createContext({}),p=function(e){var t=r.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):n(n({},t),e)),o},c=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var o=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(o),d=a,k=u["".concat(l,".").concat(d)]||u[d]||h[d]||i;return o?r.createElement(k,n(n({ref:t},c),{},{components:o})):r.createElement(k,n({ref:t},c))}));function k(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=o.length,n=new Array(i);n[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:a,n[1]=s;for(var p=2;p<i;p++)n[p]=o[p];return r.createElement.apply(null,n)}return r.createElement.apply(null,o)}d.displayName="MDXCreateElement"},4644:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>n,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var r=o(7462),a=(o(7294),o(3905));const i={sidebar_position:2},n="Cookies",s={unversionedId:"tutorials/cookies",id:"tutorials/cookies",title:"Cookies",description:"Cookies are small pieces of data that a website sends to a user's web browser while the user is browsing that website. Every time the user loads the website, the browser sends the cookie back to the server to notify the website of the user's previous activity.",source:"@site/docs/tutorials/cookies.md",sourceDirName:"tutorials",slug:"/tutorials/cookies",permalink:"/docs/tutorials/cookies",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Compression",permalink:"/docs/tutorials/compression"},next:{title:"Roadmap",permalink:"/docs/roadmap"}},l={},p=[{value:"Cookie-parser package",id:"cookie-parser-package",level:2},{value:"What to consider when using cookie-parser",id:"what-to-consider-when-using-cookie-parser",level:2},{value:"When to use",id:"when-to-use",level:2},{value:"Use with ExpressoTS",id:"use-with-expressots",level:2},{value:"Support the project",id:"support-the-project",level:2}],c={toc:p},u="wrapper";function h(e){let{components:t,...o}=e;return(0,a.kt)(u,(0,r.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"cookies"},"Cookies"),(0,a.kt)("p",null,"Cookies are small pieces of data that a website sends to a user's web browser while the user is browsing that website. Every time the user loads the website, the browser sends the cookie back to the server to notify the website of the user's previous activity."),(0,a.kt)("p",null,"Cookies serve several primary purposes:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Session Management:\nCookies are often used to handle user sessions. For example, when you log into a website, a cookie is set to remember your login state. So, as you navigate the site, you remain logged in.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Personalization:\nCookies can store user preferences to personalize the user's experience on the site. For example, cookies might store information about the user's preferred language, theme, or other settings.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Tracking:\nSome cookies track user behavior on the site over time. These are often used by third-party analytics tools to understand user behavior and optimize the site accordingly. Advertisers also use tracking cookies to display targeted ads based on user activity.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Security:\nCookies can be used to support secure website functions. For example, a cookie can be used to remember that a user has authenticated to a site so that the server knows the user has already provided valid login credentials."))),(0,a.kt)("p",null,"It's also important to note that there are different types of cookies - session cookies, which expire when the browser session ends, and persistent cookies, which remain on the user's device for a set period of time or until they are explicitly deleted."),(0,a.kt)("admonition",{title:"USING COOKIE FOR TRACKING",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Have in mind that the use of cookies, especially for tracking and personalization, has raised privacy concerns, leading to regulations such as GDPR in Europe and CCPA in California that require sites to disclose their cookie usage and obtain user consent.")),(0,a.kt)("h2",{id:"cookie-parser-package"},"Cookie-parser package"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Ease of Use: cookie-parser makes it very easy to read cookie values, which are often used for tracking user sessions, personalization, and managing stateful applications. Without this library, you would have to manually parse the Cookie header and handle the nuances of cookie formatting.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Signed Cookies: The package also supports signed cookies, which are a way to verify the integrity of cookies (i.e., whether they have been tampered with). This is an important feature for securing sensitive information stored in cookies."))),(0,a.kt)("h2",{id:"what-to-consider-when-using-cookie-parser"},"What to consider when using cookie-parser"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Overhead: While it's not a heavy library, using cookie-parser does add a bit of overhead to each request, as it parses all cookies regardless of whether they are used in the route handler.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Stateful: Cookies inherently make an application stateful. When scaling an application, state can be problematic. Therefore, alternative stateless authentication methods, like tokens, can be preferable in a microservices architecture."))),(0,a.kt)("h2",{id:"when-to-use"},"When to use"),(0,a.kt)("p",null,"Deciding when to use cookie-parser largely depends on your application's needs. If your web application requires state management and you've chosen to do that via cookies, cookie-parser can make your life easier and your application more secure with signed cookies."),(0,a.kt)("p",null,"However, if your website has heavy traffic, the overhead might become a concern. If your architecture is based around stateless services (common in microservices architectures), you might want to avoid cookies and opt for other methods of maintaining state, like JWTs (JSON Web Tokens)."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"In case you're dealing with a high traffic website, consider alternatives like sessions stored in a database, JWTs, or tokens stored in HTTP headers. Also, using a load balancer to distribute traffic and session store modules to maintain session data across multiple servers can help to manage high traffic and stateful data.")),(0,a.kt)("p",null,"Just like before, the best approach often involves combining multiple techniques, tailored to your application's specific needs. Testing and monitoring your application under realistic conditions can help guide your decision-making process."),(0,a.kt)("h2",{id:"use-with-expressots"},"Use with ExpressoTS"),(0,a.kt)("p",null,"Install the npm cookie-parser middleware and type definition."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm i cookie-parser\nnpm i -D @types/cookie-parser\n")),(0,a.kt)("p",null,"After the installation you can add the middleware to your ExpressoTS app."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'import cookieParser from "cookie-parser";\n\n// Add in the application create method in the middleware array\nAppInstance.create(container, [cookieParser()]);\n')),(0,a.kt)("p",null,"Here is an example of how to use cookie-parser:"),(0,a.kt)("p",null,"Set a cookie with a random UUID as value, that expires in 1 hour and is only accessible via HTTP:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'@httpGet("set-cookie")\nsetCookie(@response() res: Response) {\n    res.cookie("authToken", randomUUID(), {\n        maxAge: 60 * 60 * 1000, // 1 hour\n        httpOnly: true,\n    });\n    return res.send("Cookie set!");\n}\n')),(0,a.kt)("p",null,"Get a cookie:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'@httpGet("get-cookie")\ngetCookie(@cookies() cookieInfo: string, @response() res: Response) {\n    return res.send(`Your token: ${cookieInfo["authToken"]}`);\n}\n')),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Note that we are using ",(0,a.kt)("inlineCode",{parentName:"p"},"@cookies()")," decorator to get the cookie information. This decorator is provided by inversify-express-utils.")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"support-the-project"},"Support the project"),(0,a.kt)("p",null,"ExpressoTS is an MIT-licensed open source project. It's an independent project with ongoing development made possible thanks to your support. If you'd like to help, please consider:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Become a sponsor on ",(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("a",{parentName:"strong",href:"https://github.com/sponsors/expressots"},"Sponsor no GitHub"))),(0,a.kt)("li",{parentName:"ul"},"Follow the ",(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("a",{parentName:"strong",href:"https://github.com/expressots"},"organization"))," on GitHub and Star \u2b50 the project"),(0,a.kt)("li",{parentName:"ul"},"Subscribe to the Twitch channel: ",(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("a",{parentName:"strong",href:"https://www.twitch.tv/richardzampieri"},"Richard Zampieri"))),(0,a.kt)("li",{parentName:"ul"},"Join our ",(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("a",{parentName:"strong",href:"https://discord.com/invite/PyPJfGK"},"Discord"))),(0,a.kt)("li",{parentName:"ul"},"Contribute submitting ",(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("a",{parentName:"strong",href:"https://github.com/expressots/expressots/issues/new/choose"},"issues and pull requests"))),(0,a.kt)("li",{parentName:"ul"},"Share the project with your friends and colleagues")))}h.isMDXComponent=!0}}]);