"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[156],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>h});var o=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=o.createContext({}),l=function(e){var t=o.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=l(e.components);return o.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=l(r),m=n,h=d["".concat(p,".").concat(m)]||d[m]||u[m]||a;return r?o.createElement(h,i(i({ref:t},c),{},{components:r})):o.createElement(h,i({ref:t},c))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,i=new Array(a);i[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[d]="string"==typeof e?e:n,i[1]=s;for(var l=2;l<a;l++)i[l]=r[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,r)}m.displayName="MDXCreateElement"},346:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=r(7462),n=(r(7294),r(3905));const a={sidebar_position:8},i="Repositories",s={unversionedId:"overview/repositories",id:"overview/repositories",title:"Repositories",description:"In ExpressoTS, a repository class typically includes methods such as create, update, find, findOne, and delete, which correspond to common CRUD (Create, Read, Update, Delete) operations on the data store. These methods can be implemented using a database library or ORM (Object-Relational Mapping) tool such as TypeORM, Prisma, Sequelize, etc.",source:"@site/docs/overview/repositories.md",sourceDirName:"overview",slug:"/overview/repositories",permalink:"/docs/overview/repositories",draft:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"Providers",permalink:"/docs/overview/providers"},next:{title:"Entities",permalink:"/docs/overview/entities"}},p={},l=[{value:"The repository pattern",id:"the-repository-pattern",level:2},{value:"Goal of the repository pattern",id:"goal-of-the-repository-pattern",level:2},{value:"Benefit of using the repository pattern",id:"benefit-of-using-the-repository-pattern",level:2},{value:"Example",id:"example",level:2},{value:"Base repository interface",id:"base-repository-interface",level:3},{value:"Base repository class",id:"base-repository-class",level:3},{value:"User repository",id:"user-repository",level:3},{value:"Support the project",id:"support-the-project",level:2}],c={toc:l},d="wrapper";function u(e){let{components:t,...r}=e;return(0,n.kt)(d,(0,o.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"repositories"},"Repositories"),(0,n.kt)("p",null,"In ExpressoTS, a repository class typically includes methods such as create, update, find, findOne, and delete, which correspond to common CRUD (Create, Read, Update, Delete) operations on the data store. These methods can be implemented using a database library or ORM (Object-Relational Mapping) tool such as ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"https://typeorm.io/"},"TypeORM"),", ",(0,n.kt)("a",{parentName:"strong",href:"https://www.prisma.io/"},"Prisma"),", ",(0,n.kt)("a",{parentName:"strong",href:"https://sequelize.org/"},"Sequelize"),",")," etc."),(0,n.kt)("h2",{id:"the-repository-pattern"},"The repository pattern"),(0,n.kt)("p",null,"The repository pattern is a design pattern commonly used in software development that provides a way to abstract the data persistence layer of an application. In TypeScript, this pattern can be implemented using classes that represent repositories, which are responsible for retrieving, storing, updating, and deleting data from a data store, such as a database."),(0,n.kt)("p",null,"We do offer an example of how to implement a repository patterns in the opinionated template. You can find it directly in the ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"https://github.com/expressots/expressots/tree/main/templates/opinionated/src/repositories"},"repository"))," folder of the ExpressoTS application."),(0,n.kt)("h2",{id:"goal-of-the-repository-pattern"},"Goal of the repository pattern"),(0,n.kt)("p",null,"The main goal of the repository pattern is to separate the business logic from the data access logic, allowing developers to write code that is more focused on the business requirements of the application, rather than the technical details of how data is stored and accessed."),(0,n.kt)("h2",{id:"benefit-of-using-the-repository-pattern"},"Benefit of using the repository pattern"),(0,n.kt)("p",null,"By using the repository pattern, we can easily swap out the underlying data storage mechanism without affecting the rest of the application. For example, we can switch from using a relational database to a NoSQL database, or even a completely different storage mechanism like a web API, with minimal changes to the rest of the application code. Additionally, the repository pattern can make it easier to test the application, as we can use mock repositories to simulate data storage for testing purposes. Here are some of the benefits of using the repository pattern:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Centralization of data access logic: all data access logic is contained within the repository, making it easier to maintain and change the data store implementation without impacting the rest of the application.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Abstraction of data store details: the repository provides an abstraction layer that hides the details of how data is stored and accessed, allowing the application to work with data in a more abstract and consistent way.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Separation of concerns: the repository separates the business logic from the data access logic, making the code easier to read, test, and maintain.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Improved testability: the repository can be easily mocked or stubbed in unit tests, allowing for more thorough testing of the business logic without needing to connect to a real data store.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Overall, the repository pattern is a powerful tool that can help developers build scalable and maintainable TypeScript applications that are more focused on business requirements and less on technical implementation details."))),(0,n.kt)("h2",{id:"example"},"Example"),(0,n.kt)("p",null,"We offer an example of Repository pattern implementation in the opinionated template of ExpressoTS."),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"In ExpressoTS, we implement the repository pattern in a specific folder called ",(0,n.kt)("strong",{parentName:"p"},'"repositories"'),", which is separated from the ",(0,n.kt)("strong",{parentName:"p"},'"provider"')," folder intentionally, even though it could be considered as a type of provider. We did this to give more emphasis to the repository pattern and make it clear to developers that it is an important decoupled that the development of the application could benefit of.")),(0,n.kt)("h3",{id:"base-repository-interface"},"Base repository interface"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"interface IEntity {\n  Id: string;\n}\n\ninterface IBaseRepository<T> {\n  create(item: T): T | null;\n  update(item: T): T | null;\n  delete(id: string): boolean;\n  find(id: string): T | null;\n  findAll(): T[];\n}\n")),(0,n.kt)("h3",{id:"base-repository-class"},"Base repository class"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"@provide(BaseRepository)\nclass BaseRepository<T extends IEntity> implements IBaseRepository<T> {\n  private readonly USERDB: T[] = [];\n\n  create(item: T): T | null {\n    this.DB.push(item);\n    return item;\n  }\n\n  update(item: T) {\n    this.DB.push(item);\n    return item;\n  }\n\n  delete(id: string): boolean {\n    const index: number = this.DB.findIndex((item) => item.Id === id);\n\n    if (index != -1) {\n      this.DB.splice(index, 1);\n      return true;\n    }\n    return false;\n  }\n\n  find(id: string): T | null {\n    const user = this.DB.find((item) => item.Id === id);\n    return user || null;\n  }\n\n  findAll(): T[] {\n    return this.DB;\n  }\n}\n")),(0,n.kt)("h3",{id:"user-repository"},"User repository"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"@provide(UserRepository)\nclass UserRepository extends BaseRepository<User> {\n  constructor() {\n    super();\n  }\n}\n")),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"support-the-project"},"Support the project"),(0,n.kt)("p",null,"ExpressoTS is an MIT-licensed open source project. It's an independent project with ongoing development made possible thanks to your support. If you'd like to help, please consider:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Become a sponsor on ",(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://github.com/sponsors/expressots"},"Sponsor no GitHub"))),(0,n.kt)("li",{parentName:"ul"},"Follow the ",(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://github.com/expressots"},"organization"))," on GitHub and Star \u2b50 the project"),(0,n.kt)("li",{parentName:"ul"},"Subscribe to the Twitch channel: ",(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://www.twitch.tv/richardzampieri"},"Richard Zampieri"))),(0,n.kt)("li",{parentName:"ul"},"Join our ",(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://discord.com/invite/PyPJfGK"},"Discord"))),(0,n.kt)("li",{parentName:"ul"},"Contribute submitting ",(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://github.com/expressots/expressots/issues/new/choose"},"issues and pull requests"))),(0,n.kt)("li",{parentName:"ul"},"Share the project with your friends and colleagues")))}u.isMDXComponent=!0}}]);