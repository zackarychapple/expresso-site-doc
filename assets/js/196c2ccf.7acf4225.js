"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[800],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=r.createContext({}),l=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(p.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=l(n),h=o,m=u["".concat(p,".").concat(h)]||u[h]||d[h]||a;return n?r.createElement(m,i(i({ref:t},c),{},{components:n})):r.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=h;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[u]="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},7885:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var r=n(7462),o=(n(7294),n(3905));const a={sidebar_position:3},i="App Container",s={unversionedId:"overview/app-container",id:"overview/app-container",title:"App Container",description:"The ExpressoTS uses InversifyJS as its ioC (Inversion of Control) container. It is a powerful tool for managing dependency injection. It is a type-aware container that can be used to manage the instantiation and resolution of objects, as well as the management of their life cycles.",source:"@site/docs/overview/app-container.md",sourceDirName:"overview",slug:"/overview/app-container",permalink:"/docs/overview/app-container",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Application",permalink:"/docs/overview/application"},next:{title:"Modules",permalink:"/docs/overview/module"}},p={},l=[{value:"Creating the container",id:"creating-the-container",level:2},{value:"Defining the container scope",id:"defining-the-container-scope",level:2},{value:"Registering modules",id:"registering-modules",level:2},{value:"Support the project",id:"support-the-project",level:2}],c={toc:l},u="wrapper";function d(e){let{components:t,...n}=e;return(0,o.kt)(u,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"app-container"},"App Container"),(0,o.kt)("p",null,"The ExpressoTS uses ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"https://inversify.io/"},"InversifyJS"))," as its ioC (Inversion of Control) container. It is a powerful tool for managing dependency injection. It is a type-aware container that can be used to manage the instantiation and resolution of objects, as well as the management of their life cycles."),(0,o.kt)("p",null,"The container provides a central location for managing dependencies and creating objects that depend on other objects. When a class is registered with the container, it becomes immediately available for injection into other classes. This allows for the creation of complex object graphs with minimal boilerplate code."),(0,o.kt)("p",null,"Taking advantage of InversifyJS we created a wrapper to reduce complexity on how controllers, use cases, providers get injected within the application container. The wrapper is called ",(0,o.kt)("inlineCode",{parentName:"p"},"AppContainer")," and it is responsible for registering all the application modules within the container."),(0,o.kt)("h2",{id:"creating-the-container"},"Creating the container"),(0,o.kt)("p",null,"Upon creating the application container it is possible to define the default scope of the container. The default scope is ",(0,o.kt)("inlineCode",{parentName:"p"},"RequestScope")," which means that all the dependencies will be created once per request. This is the common scope for most web applications used in other frameworks such as Spring Boot or .NET Core as well."),(0,o.kt)("p",null,"Here is an example on how to create a container:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"const appContainer = new AppContainer();\n\nconst container = appContainer.create([\n    // Register all the modules\n]);\n")),(0,o.kt)("h2",{id:"defining-the-container-scope"},"Defining the container scope"),(0,o.kt)("p",null,"As mentioned above, if the ",(0,o.kt)("inlineCode",{parentName:"p"},"defaultScope")," is not provided, the default is set to RequestScope. However, it is possible to change the default scope by passing the ",(0,o.kt)("inlineCode",{parentName:"p"},"defaultScope")," as a second argument to the module injection. The BindingScopeEnum is an enum that contains the following values:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"BindingScopeEnum.Singleton")," - The dependency will be created once and will be shared across all requests."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"BindingScopeEnum.Request")," - The dependency will be created once per request."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"BindingScopeEnum.Transient")," - The dependency will be created every time it is requested.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"const appContainer = new AppContainer();\n\nconst container = appContainer.create(\n    [\n        // Add your modules here\n    ],\n    BindingScopeEnum.Singleton,\n);\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"If you don't pass the ",(0,o.kt)("inlineCode",{parentName:"p"},"defaultScope")," as a second argument, the default scope is set to ",(0,o.kt)("inlineCode",{parentName:"p"},"RequestScope"),".")),(0,o.kt)("h2",{id:"registering-modules"},"Registering modules"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"AppContainer")," class has a ",(0,o.kt)("inlineCode",{parentName:"p"},"create")," method that receives an array of modules and returns the container with all the modules registered. The container here created is the same container that is used by the ",(0,o.kt)("inlineCode",{parentName:"p"},"Application")," class to initialize the server."),(0,o.kt)("p",null,"Once the container is created developers can register ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"/docs/overview/module"},"modules"))," within the container:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"// Create a new container\nconst appContainer = new AppContainer();\n\nconst container = appContainer.create([\n    // Register all the modules\n    UserModule,\n    PaymentModule,\n    ProductModule\n]);\n\nexport default container;\n")),(0,o.kt)("p",null,"The reason why we created the ",(0,o.kt)("inlineCode",{parentName:"p"},"AppContainer")," class is to reduce the complexity of how the container is constructed using Inversify directly, also was to provide a way to register modules without too much extra configuration."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"support-the-project"},"Support the project"),(0,o.kt)("p",null,"ExpressoTS is an MIT-licensed open source project. It's an independent project with ongoing development made possible thanks to your support. If you'd like to help, please consider:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Become a sponsor on ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"https://github.com/sponsors/expressots"},"Sponsor no GitHub"))),(0,o.kt)("li",{parentName:"ul"},"Follow the ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"https://github.com/expressots"},"organization"))," on GitHub and Star \u2b50 the project"),(0,o.kt)("li",{parentName:"ul"},"Subscribe to the Twitch channel: ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"https://www.twitch.tv/richardzampieri"},"Richard Zampieri"))),(0,o.kt)("li",{parentName:"ul"},"Join our ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"https://discord.com/invite/PyPJfGK"},"Discord"))),(0,o.kt)("li",{parentName:"ul"},"Contribute submitting ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"https://github.com/expressots/expressots/issues/new/choose"},"issues and pull requests"))),(0,o.kt)("li",{parentName:"ul"},"Share the project with your friends and colleagues")))}d.isMDXComponent=!0}}]);