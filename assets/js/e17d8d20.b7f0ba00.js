"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[799],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=i.createContext({}),p=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return i.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),d=r,h=u["".concat(l,".").concat(d)]||u[d]||m[d]||a;return n?i.createElement(h,o(o({ref:t},c),{},{components:n})):i.createElement(h,o({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,o[1]=s;for(var p=2;p<a;p++)o[p]=n[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4879:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>p});var i=n(7462),r=(n(7294),n(3905));const a={sidebar_position:9},o="Entities",s={unversionedId:"overview/entities",id:"overview/entities",title:"Entities",description:"Entities are the core components of an ExpressoTS application. They are the objects that are used to represent the data that is going to be manipulated by the application.",source:"@site/docs/overview/entities.md",sourceDirName:"overview",slug:"/overview/entities",permalink:"/docs/overview/entities",draft:!1,tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"Repositories",permalink:"/docs/overview/repositories"},next:{title:"Decorators",permalink:"/docs/overview/decorators"}},l={},p=[{value:"Entity Example",id:"entity-example",level:2},{value:"Entities and Encapsulation",id:"entities-and-encapsulation",level:2},{value:"Entity injection",id:"entity-injection",level:2},{value:"Avoid this",id:"avoid-this",level:2},{value:"Reasons to avoid primitive parameter in injectable classes",id:"reasons-to-avoid-primitive-parameter-in-injectable-classes",level:3},{value:"Entity proper injection",id:"entity-proper-injection",level:2},{value:"Support the project",id:"support-the-project",level:2}],c={toc:p},u="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,i.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"entities"},"Entities"),(0,r.kt)("p",null,"Entities are the core components of an ExpressoTS application. They are the objects that are used to represent the data that is going to be manipulated by the application."),(0,r.kt)("p",null,"If an entity changes, most likely use cases and controllers will also change. This is because the use cases and controllers are responsible for manipulating the data represented by the entities."),(0,r.kt)("h2",{id:"entity-example"},"Entity Example"),(0,r.kt)("p",null,"Here a simple example of an entity User and it's properties:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@provide(User)\nclass User {\n  private id: string;\n  public name: string;\n  public email: string;\n\n  constructor() {\n    this.id = uuidv4();\n  }\n\n  get Id(): string {\n    return this.id;\n  }\n}\n")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Remember that you should have one entity per file.")),(0,r.kt)("h2",{id:"entities-and-encapsulation"},"Entities and Encapsulation"),(0,r.kt)("p",null,"This section is dedicated to promote a reflection when you think about entities. For years we have been told that entities or classes properties should be encapsulated, its methods should abstract the internal implementation and expose only the necessary information to the outside world. This is a good practice when thinking about Object Oriented Programming Paradigm, however this is not always the best approach."),(0,r.kt)("p",null,"If you think about it, classes, or entities, whatever you call it, are just a way to represent data. They are just a way to group data together.\nWith this in mind, classes or entities became much more simple to maintain and understand, as they don't contain any logic."),(0,r.kt)("p",null,"This way of thinking is called ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://martinfowler.com/bliki/AnemicDomainModel.html"},"Anemic Domain Model"))," and it's a very controversial topic. It's not the purpose of this documentation to discuss this topic, but it's important to mention it, as it's a very important concept when thinking about ExpressoTS entities."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Say good bye to God classes, and say hello to simple entities, say hello to data.")),(0,r.kt)("h2",{id:"entity-injection"},"Entity injection"),(0,r.kt)("p",null,"If your entity has dependencies, you can inject them using the ",(0,r.kt)("inlineCode",{parentName:"p"},"@inject")," decorator."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},'@provide(User)\nclass User {\n    \n  constructor(@inject("logger") private logger: Logger) {}\n}\n')),(0,r.kt)("h2",{id:"avoid-this"},"Avoid this"),(0,r.kt)("p",null,"Avoid marking constructors with primitive parameters as injectable. This is because it can be difficult for the DI container to infer what values to provide for these parameters. Here is an example of what you should avoid:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@provide(User)\nclass User {\n  name: string;\n  constructor(name: string) {\n    this.name = name;\n  }\n}\n")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"In many dependency injection (DI) systems, including InversifyJS, the DI container is responsible for constructing objects and injecting dependencies. When a class constructor contains primitive parameters, it can be difficult for the DI container to infer what values to provide for these parameters. This is because primitive values (like strings, numbers, and booleans) do not carry any inherent semantic meaning that the container can understand.")),(0,r.kt)("h3",{id:"reasons-to-avoid-primitive-parameter-in-injectable-classes"},"Reasons to avoid primitive parameter in injectable classes"),(0,r.kt)("p",null,"Here are some of the reasons why constructors with primitive parameters can be problematic in DI:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Ambiguity: If a class has a constructor that requires primitive types, the DI container won't know what values to inject. For example, if a class requires a number in its constructor, the DI container doesn't know what this number represents and what value it should have.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Inflexibility: A primitive value in the constructor implies that the value is a fixed part of the class. However, DI is often used to manage interchangeable parts of an application (e.g., different implementations of an interface).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Non-descriptive: Primitive values are often non-descriptive and can lead to confusing code. For example, a constructor that takes two string parameters might raise questions like: What do these strings represent? Are there any specific formats or constraints on these strings?"))),(0,r.kt)("h2",{id:"entity-proper-injection"},"Entity proper injection"),(0,r.kt)("p",null,"If you want to inject an entity into another class you must rethink your design. If you really need primitive parameters on your constructor use factories to create your entities or the Repository pattern."),(0,r.kt)("p",null,"Here is an example of a factory:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@provide(User)\nclass User implements IEntity {\n  public id: string;\n  public name!: string;\n  public email!: string;\n\n  constructor() {\n    this.id = randomUUID();\n  }\n}\n\ninterface IUserFactory {\n  create(name: string, email: string): User;\n}\n\n@provide(UserFactory)\nclass UserFactory implements IUserFactory {\n  create(name: string, email: string): User {\n    const user = new User();\n    user.name = name;\n    user.email = email;\n    return user;\n  }\n}\n\nexport { User, UserFactory };\n\n")),(0,r.kt)("p",null,"Now ",(0,r.kt)("inlineCode",{parentName:"p"},"UserFactory")," can be easily injected into other classes."),(0,r.kt)("p",null,"As mentioned above, there are several other approaches, as long as you remain strong \ud83d\ude01 of not using constructors with primitives parameters in classes that you are planning to inject."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"support-the-project"},"Support the project"),(0,r.kt)("p",null,"ExpressoTS is an MIT-licensed open source project. It's an independent project with ongoing development made possible thanks to your support. If you'd like to help, please consider:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Become a sponsor on ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/sponsors/expressots"},"Sponsor no GitHub"))),(0,r.kt)("li",{parentName:"ul"},"Follow the ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/expressots"},"organization"))," on GitHub and Star \u2b50 the project"),(0,r.kt)("li",{parentName:"ul"},"Subscribe to the Twitch channel: ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://www.twitch.tv/richardzampieri"},"Richard Zampieri"))),(0,r.kt)("li",{parentName:"ul"},"Join our ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://discord.com/invite/PyPJfGK"},"Discord"))),(0,r.kt)("li",{parentName:"ul"},"Contribute submitting ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/expressots/expressots/issues/new/choose"},"issues and pull requests"))),(0,r.kt)("li",{parentName:"ul"},"Share the project with your friends and colleagues")))}m.isMDXComponent=!0}}]);