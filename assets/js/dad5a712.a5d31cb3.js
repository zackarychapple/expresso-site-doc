"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[937],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),h=r,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||o;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},2743:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const o={sidebar_position:2},i="Application",s={unversionedId:"overview/application",id:"overview/application",title:"Application",description:"The Application Overview provides a comprehensive demonstration of the main components of an ExpressoTS application. At the heart of an ExpressoTS application lies the Application class, which serves as the foundation for creating and configuring the server. Additionally, the Application class makes use of the application container from Inversify that loads all the modules, including their respective routes [controllers]. This ensures a streamlined and efficient process for handling incoming requests and delivering the appropriate responses.",source:"@site/docs/overview/application.md",sourceDirName:"overview",slug:"/overview/application",permalink:"/docs/overview/application",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"First Steps",permalink:"/docs/overview/first-steps"},next:{title:"App Container",permalink:"/docs/overview/app-container"}},l={},p=[{value:"Application components breakdown",id:"application-components-breakdown",level:2},{value:"Workflow",id:"workflow",level:2},{value:"Application class",id:"application-class",level:2},{value:"Create method",id:"create-method",level:3},{value:"Listen method",id:"listen-method",level:3},{value:"Application server environment",id:"application-server-environment",level:3},{value:"Application lifecycle hooks",id:"application-lifecycle-hooks",level:2},{value:"Hooks execution order",id:"hooks-execution-order",level:3},{value:"Application scripts",id:"application-scripts",level:2},{value:"Running the application",id:"running-the-application",level:2},{value:"Support the project",id:"support-the-project",level:2}],c={toc:p},d="wrapper";function u(e){let{components:t,...o}=e;return(0,r.kt)(d,(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"application"},"Application"),(0,r.kt)("p",null,"The Application Overview provides a comprehensive demonstration of the main components of an ExpressoTS application. At the heart of an ExpressoTS application lies the Application class, which serves as the foundation for creating and configuring the server. Additionally, the Application class makes use of the application container from Inversify that loads all the modules, including their respective routes ","[controllers]",". This ensures a streamlined and efficient process for handling incoming requests and delivering the appropriate responses."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Application Overview",src:n(6290).Z,width:"765",height:"563"})),(0,r.kt)("p",null,"ExpressoTS is a web application framework that provides a simple wrapper around popular HTTP servers like ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://expressjs.com"},"Express")),", ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://www.fastify.io/"},"Fastify")),", or ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://koajs.com/"},"Koa")),"."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Currently, ExpressoTS only supports Express, as we tested it thoroughly.")),(0,r.kt)("p",null,"The architecture of an ExpressoTS application is around of the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://inversify.io/"},"Inversify's"))," IoC container, which is used to identify and inject dependencies into class constructors. This approach allows the IoC container to load all the necessary modules, including their respective routes (controllers). By using use-cases and providers as needed, routers can handle incoming requests."),(0,r.kt)("p",null,"By leveraging the power of Inversify, ExpressoTS provides a custom Dependency Injection system that is scalable and modular, an architecture that helps to decouple components and improve maintainability. This allows developers to focus on writing clean and maintainable code."),(0,r.kt)("h2",{id:"application-components-breakdown"},"Application components breakdown"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Component"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"DTO IN / OUT"),(0,r.kt)("td",{parentName:"tr",align:null},"Data transfer object that defines the format of the incoming and outgoing payload of the application.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Controller"),(0,r.kt)("td",{parentName:"tr",align:null},"Component responsible for processing requests and responses based on the URL and HTTP method. It also validates the conformity of the incoming data.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Use Case"),(0,r.kt)("td",{parentName:"tr",align:null},"Component responsible for implementing the logic required to handle requests received from the controller. When the controller receives an HTTP request and validates the incoming data, it triggers the relevant use case, passing along the validated data for processing. The use case performs the necessary operations based on the request and returns the appropriate response to the controller, which then sends the response back to the client.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Provider"),(0,r.kt)("td",{parentName:"tr",align:null},"Component responsible for providing external functionality to the application.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Repository"),(0,r.kt)("td",{parentName:"tr",align:null},"Component responsible for providing layer of communication with the database. Facilitating connection and CRUD operations.")))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Providers and Repositories are optional components. You can use them if you need to provide extra functionality to your application such as database integration, logging system, authentication, email etc.")),(0,r.kt)("h2",{id:"workflow"},"Workflow"),(0,r.kt)("p",null,"The workflow of an ExpressoTS application is straightforward, as shown in the diagram above."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"After initializing the application with all its components, including the container, modules, and controllers, the server starts listening for incoming requests."),(0,r.kt)("li",{parentName:"ol"},"When a request is received, the server looks for the corresponding route and executes the associated controller, which typically exposes endpoints."),(0,r.kt)("li",{parentName:"ol"},"The controller then calls the relevant use-case, which in turn calls the appropriate provider when required. Providers are external components that offer additional functionality to the application.")),(0,r.kt)("admonition",{title:"Initializing the Application without a controller",type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"ExpressoTS will prevent you to do that as there are no listeners to handle incoming requests. You will see the following message in the console:\n",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"No controllers have been found! Please ensure that you have register at least one Controller.")))),(0,r.kt)("h2",{id:"application-class"},"Application class"),(0,r.kt)("p",null,"The Application class offers a way of creating and configuring the server, passing ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://expressjs.com/en/guide/writing-middleware.html"},"Expressjs middlewares"))," or other middlewares upon server creation."),(0,r.kt)("p",null,"Application class definition"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"class Application {\n  /**\n   * Configure services that should be initialized before the server starts.\n   */\n  protected configureServices(): void {}\n\n  /**\n   * Configure services that should be executed after the server starts.\n   */\n  protected postServerInitialization(): void {}\n\n  /**\n   * Perform actions or cleanup after the server is shutdown.\n   */\n  protected serverShutdown(): void {\n    process.exit(0);\n  }\n\n  public create(\n    container: Container,\n    middlewares: express.RequestHandler[] = []\n  ): Application {}\n\n  public listen(\n    port: number,\n    environment: ServerEnvironment,\n    consoleMessage?: IApplicationMessageToConsole\n  ) {}\n}\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"We also provide an instance of the Application class called ",(0,r.kt)("strong",{parentName:"p"},"AppInstance"),", which only exposes the create and listen methods to the developer. This is beneficial when you need to quickly create a server without having to create a new class that extends the Application class and access its lifecycle methods.")),(0,r.kt)("h3",{id:"create-method"},"Create method"),(0,r.kt)("p",null,"Create method allows developers to pass the container and middlewares to the server. To pass middlewares you don't need to use ",(0,r.kt)("inlineCode",{parentName:"p"},"app.use()"),", just simply pass the middleware and it's configuration as demonstrated below:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},'async function Bootstrap() {\n  App.create(container, [\n    express.json(),\n    express.urlencoded({ extended: true }),\n    cors({\n      origin: "*",\n    }),\n  ]);\n}\n')),(0,r.kt)("h3",{id:"listen-method"},"Listen method"),(0,r.kt)("p",null,"The listen method starts the server and listens for incoming requests. In the listen method, developers can define not just the port number but also the server environment, which can be either development, staging, or production. As well as the developers can set the application name and version to be displayed in the console when the server starts, as shown in the following example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},'// App listen method\napp.listen(3000, ServerEnvironment.Development, {\n  appName: "Your App Name",\n  appVersion: "v1.0.0",\n});\n')),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The name and version of your app can be configured via either the .env file or package.json file. In the opinionated template, we use the package.json file to retrieve the app name and version.")),(0,r.kt)("h3",{id:"application-server-environment"},"Application server environment"),(0,r.kt)("p",null,"For now this is a working in progress functionality. What it does is simply display the environment in the console when the server starts. The colored console message helps developers to quickly identify the environment the server is running on."),(0,r.kt)("p",null,"Here is the enum available of the server environment:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"ServerEnvironment.Development;\nServerEnvironment.Staging;\nServerEnvironment.Production;\n")),(0,r.kt)("admonition",{title:"SPOILER ALERT",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"The goal with this functionality is to allow developers to load environment variables based on the environment the server is running on. For example, if the server is running on development, load the .env.dev file, if the server is running on staging, load the .env.stg file, and if the server is running on production, load the .env.prod file. Also, we are planning to load environment variables from remote sources such as AWS Parameter Store, AWS Secrets Manager, Azure Key, Vault, etc.")),(0,r.kt)("h2",{id:"application-lifecycle-hooks"},"Application lifecycle hooks"),(0,r.kt)("p",null,"Another important aspect of the Application class is life cycle hooks. These hooks allow developers to execute code before, after and on the server shutdown. Important to note that in order to take advantage of these hooks, developers must created an App Class extending the Application class and override the methods as needed. The following example shows the life cycle hooks available at the moment:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"    /* Add any service that you want to be initialized before the server starts */\n    protected configureServices(): void { }\n\n    /* Add any service that you want to execute after the server starts */\n    protected postServerInitialization(): void { }\n\n    /* Add any service that you want to execute after server is shutdown */\n    protected serverShutdown(): void {\n        process.exit(0);\n     }\n")),(0,r.kt)("h3",{id:"hooks-execution-order"},"Hooks execution order"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Application Lifecycle Hooks",src:n(670).Z,width:"888",height:"744"})),(0,r.kt)("h2",{id:"application-scripts"},"Application scripts"),(0,r.kt)("p",null,"Please see below all the available scripts that you can use to run, build and test your application.\nThe command column shows NPM as the package manager, but you can use Yarn or any other package manager of your choice."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Script"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Command"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"build"),(0,r.kt)("td",{parentName:"tr",align:null},"Build the production bundle in a ./dist folder."),(0,r.kt)("td",{parentName:"tr",align:null},"npm run build")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dev"),(0,r.kt)("td",{parentName:"tr",align:null},"Runs in development watch mode."),(0,r.kt)("td",{parentName:"tr",align:null},"npm run dev")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"prod"),(0,r.kt)("td",{parentName:"tr",align:null},"Runs in production mode based on built bundle."),(0,r.kt)("td",{parentName:"tr",align:null},"npm run prod")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"test"),(0,r.kt)("td",{parentName:"tr",align:null},"Run your tests located in the test folder."),(0,r.kt)("td",{parentName:"tr",align:null},"npm run test")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"test:watch"),(0,r.kt)("td",{parentName:"tr",align:null},"Run your tests in watch and interactive mode."),(0,r.kt)("td",{parentName:"tr",align:null},"npm run test:watch")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"test:cov"),(0,r.kt)("td",{parentName:"tr",align:null},"Produces test coverage report."),(0,r.kt)("td",{parentName:"tr",align:null},"npm run test:cov")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"format"),(0,r.kt)("td",{parentName:"tr",align:null},"Format the code using prettier."),(0,r.kt)("td",{parentName:"tr",align:null},"npm run format")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"lint"),(0,r.kt)("td",{parentName:"tr",align:null},"Lint code using eslint."),(0,r.kt)("td",{parentName:"tr",align:null},"npm run lint")))),(0,r.kt)("h2",{id:"running-the-application"},"Running the application"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run dev\n")),(0,r.kt)("p",null,"Depending on the environment you are running the application, you will see the following message in the console:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"expressots-demo version 1.0.0 is running on port 3000 - Environment: development")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"support-the-project"},"Support the project"),(0,r.kt)("p",null,"ExpressoTS is an MIT-licensed open source project. It's an independent project with ongoing development made possible thanks to your support. If you'd like to help, please consider:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Become a sponsor on ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/sponsors/expressots"},"Sponsor no GitHub"))),(0,r.kt)("li",{parentName:"ul"},"Follow the ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/expressots"},"organization"))," on GitHub and Star \u2b50 the project"),(0,r.kt)("li",{parentName:"ul"},"Subscribe to the Twitch channel: ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://www.twitch.tv/richardzampieri"},"Richard Zampieri"))),(0,r.kt)("li",{parentName:"ul"},"Join our ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://discord.com/invite/PyPJfGK"},"Discord"))),(0,r.kt)("li",{parentName:"ul"},"Contribute submitting ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/expressots/expressots/issues/new/choose"},"issues and pull requests"))),(0,r.kt)("li",{parentName:"ul"},"Share the project with your friends and colleagues")))}u.isMDXComponent=!0},670:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/app-life-cycle-5aff06238ec4747c403c50338d2f7e84.png"},6290:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/app-overview-4deef0a5f07659a2f1ccb9038eb7ce29.png"}}]);